{"name": "test_search_flow", "status": "broken", "statusDetails": {"message": "TypeError: ContactPage.calculate_age() takes 3 positional arguments but 4 were given", "trace": "driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"3d67c0e3287aec9e36000613e65e801a\")>\n\n    def test_search_flow(driver):\n        driver.get(\"https://av-booking-dev.newshore.es/es/\")\n        search = SearchPage(driver)\n        search.accept_cookies((By.ID,\"onetrust-accept-btn-handler\"))\n        search.capture(\"Accept Cookies\")\n        search.select_origin(\"Medellin\", \"MDE\")\n        #WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.ID, \"arrivalStationInputId\")))\n        search.select_destination(\"Bogota\", \"BOG\")\n        search.select_date_origin(\"22-10-2025\")\n        search.select_date_destination(\"26-10-2025\")\n        #search.select_passengers_by_type(passenger_type=1) #passengers by type\n        search.select_passengers_dynamic([1,2,1,3])\n        code_passengers = [1,2,1,3]\n        type_for_passengers = map_types_by_code(code_passengers)\n        search.validate_total_passengers(5)\n        search.click_search_button()\n    \n        # select fligth\n        select = SelectFlightPage(driver)\n        select.select_fare_by_index(index=1)\n        select.select_tariff_by_index(index=2)\n        select.select_fare_by_index(index=29)\n        select.select_tariff_by_index(index=2)\n        select.click_continue_button()\n    \n        # Contacts\n        contact = ContactPage(driver)\n        contact.wait_for_contact_page()\n        suffixes = contact.get_passenger_suffixes()\n    \n        first_names = [\"Santiago\", \"Emilio\", \"Caro\", \"Alejo\"]\n        last_names = [\"Gomez\", \"Lopez\", \"Torres\", \"Ramirez\"]\n    \n        for i, suffix in enumerate(suffixes):\n            passenger_type = type_for_passengers[i]\n            day, month, year = generate_date_of_birth(passenger_type)\n    \n>           contact.fill_passenger_info(\n                index=i,\n                suffix=suffix,\n                first_name=first_names[i],\n                last_name=last_names[i],\n                gender=0,\n                day=day,\n                month=month,\n                year=year,\n                nationality_index=0,\n                passenger_type=passenger_type\n            )\n\ntests\\test_search_flow.py:54: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\Contact_Page.py:115: in fill_passenger_info\n    self.select_dropdown_value(suffix, \"year\", year, birth_date=birth_date, passenger_type=passenger_type)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.Contact_Page.ContactPage object at 0x0000022CA3402120>, suffix = '7E7E3533344234383244333132443435353835347E31', field_type = 'year'\nvalue = 2009, birth_date = (9, 6, 2009), passenger_type = 'adults'\n\n    @allure.step(\"Select dropdown value: {field_type} = {value} for suffix {suffix}\")\n    def select_dropdown_value(self, suffix, field_type, value, birth_date=None, passenger_type=None):\n        field_ids = {\n            \"day\": \"dateDayId_IdDateOfBirthHidden\",\n            \"month\": \"dateMonthId_IdDateOfBirthHidden\",\n            \"year\": \"dateYearId_IdDateOfBirthHidden\"\n        }\n    \n        if field_type not in field_ids:\n            raise ValueError(f\"Invalid field type: {field_type}. Must be 'day', 'month', or 'year'.\")\n    \n        base_id = field_ids[field_type]\n        dropdown = (By.ID, f\"{base_id}_{suffix}_\")\n        if field_type == \"month\":\n            visible_text = MONTH_NAMES.get(value)\n            if not visible_text:\n                raise ValueError(f\"Invalid month number: {value}\")\n            option = (By.XPATH, f\"//span[@class='ui-dropdown_item_option_name' and text()='{visible_text}']\")\n        elif field_type == \"year\":\n            option = (By.XPATH, f\"//span[@class='ui-dropdown_item_option_name' and text()='{value}']\")\n        else:\n            option = (By.ID, f\"{base_id}_{suffix}_-{value}\")\n    \n        self.scroll_and_click(dropdown)\n        try:\n            self.wait.until(EC.presence_of_element_located(option))\n        except TimeoutException:\n            self.capture(f\"{field_type.capitalize()} {value} not found for suffix {suffix}\")\n            raise Exception(f\" {field_type.capitalize()} {value} not found in dropdown for suffix '{suffix}' (passenger type '{passenger_type}')\")\n        try:\n            self.driver.execute_script(\"arguments[0].scrollIntoView({block: 'center'});\", self.driver.find_element(*option))\n        except:\n            self.capture(f\"Failed to scroll to {field_type} value: {value}\")\n        self.scroll_and_click(option)\n        self.capture(f\"Select {field_type}: {value}\")\n    \n        if birth_date and passenger_type:\n            day, month, year = birth_date\n>           age = self.calculate_age(day, month, year)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           TypeError: ContactPage.calculate_age() takes 3 positional arguments but 4 were given\n\npages\\Contact_Page.py:91: TypeError"}, "steps": [{"name": "Accept Cookies", "status": "passed", "parameters": [{"name": "locator", "value": "('id', 'onetrust-accept-btn-handler')"}], "start": 1758054669583, "stop": 1758054669609}, {"name": "Select origen: 'Medellin' ('MDE')", "status": "passed", "attachments": [{"name": "Select origen (Medellin, MDE)", "source": "76c1c75e-eba9-4ca6-91d5-ec4772fcc340-attachment.png", "type": "image/png"}], "parameters": [{"name": "city", "value": "'Medellin'"}, {"name": "code", "value": "'MDE'"}], "start": 1758054670226, "stop": 1758054672799}, {"name": "Select destination: 'Bogota' ('BOG')", "status": "passed", "attachments": [{"name": "Select destination ({city}, {code})", "source": "8b0917c0-b566-4cbe-bfb0-c61c399a092f-attachment.png", "type": "image/png"}], "parameters": [{"name": "city", "value": "'Bogota'"}, {"name": "code", "value": "'BOG'"}], "start": 1758054672799, "stop": 1758054674999}, {"name": "Select date origen: '22-10-2025' ", "status": "passed", "attachments": [{"name": "Select date origen (22-10-2025)", "source": "d685e002-2a8e-4841-ae4c-18a3af05566e-attachment.png", "type": "image/png"}], "parameters": [{"name": "departure_data_str", "value": "'22-10-2025'"}], "start": 1758054674999, "stop": 1758054675832}, {"name": "Select date destination: '26-10-2025' ", "status": "passed", "attachments": [{"name": "Select date destination (26-10-2025)", "source": "da509bcb-4ac8-4c94-a0f1-3a79fe0317a8-attachment.png", "type": "image/png"}], "parameters": [{"name": "arrival_data_str", "value": "'26-10-2025'"}], "start": 1758054675832, "stop": 1758054676312}, {"name": "Select passenger dynamic", "status": "passed", "steps": [{"name": "select passenger 1", "status": "passed", "attachments": [{"name": "Select passenger 1", "source": "c6944d5e-7f62-43fd-b772-bca16fc70d41-attachment.png", "type": "image/png"}], "parameters": [{"name": "passenger_type", "value": "1"}], "start": 1758054676312, "stop": 1758054676668}, {"name": "select passenger 2", "status": "passed", "attachments": [{"name": "Select passenger 2", "source": "f31aa8a2-888d-49a8-91aa-d76f881182a7-attachment.png", "type": "image/png"}], "parameters": [{"name": "passenger_type", "value": "2"}], "start": 1758054676668, "stop": 1758054677125}, {"name": "select passenger 1", "status": "passed", "attachments": [{"name": "Select passenger 1", "source": "5695d16a-86ca-4fc8-8f08-088df04aac26-attachment.png", "type": "image/png"}], "parameters": [{"name": "passenger_type", "value": "1"}], "start": 1758054677125, "stop": 1758054677444}, {"name": "select passenger 3", "status": "passed", "attachments": [{"name": "Select passenger 3", "source": "4746b9b0-9e5d-4249-90ad-940ca855b8e5-attachment.png", "type": "image/png"}], "parameters": [{"name": "passenger_type", "value": "3"}], "start": 1758054677444, "stop": 1758054677737}, {"name": "validation of passengers 4", "status": "passed", "parameters": [{"name": "expected_count", "value": "4"}], "start": 1758054677737, "stop": 1758054677751}], "attachments": [{"name": "Select passenger dynamic", "source": "3fa3bec4-ebfe-4c3c-a195-a51b0e7aae73-attachment.png", "type": "image/png"}], "parameters": [{"name": "types", "value": "[1, 2, 1, 3]"}], "start": 1758054676312, "stop": 1758054677863}, {"name": "validation of passengers 5", "status": "passed", "parameters": [{"name": "expected_count", "value": "5"}], "start": 1758054677863, "stop": 1758054677873}, {"name": "Click search button ('id', 'searchButton')", "status": "passed", "attachments": [{"name": "Click search button ('id', 'searchButton')", "source": "8ebbd687-121d-41d7-bc15-6848e8b49361-attachment.png", "type": "image/png"}], "parameters": [{"name": "locator", "value": "('id', 'searchButton')"}], "start": 1758054677873, "stop": 1758054680508}, {"name": "Select  flight 1", "status": "passed", "attachments": [{"name": "wait element", "source": "4e4d7902-aa82-4961-81aa-f12663ddaf09-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "9e8d694d-5fd9-4e6b-a573-cdcc130188d7-attachment.png", "type": "image/png"}, {"name": "Select   flight {index}", "source": "0f15f9d4-3069-4aac-a8c5-9f995d05c837-attachment.png", "type": "image/png"}], "parameters": [{"name": "index", "value": "1"}], "start": 1758054680508, "stop": 1758054689842}, {"name": "Select fare option at position 2", "status": "passed", "attachments": [{"name": "wait element", "source": "52ffa269-7f1e-4c46-8fdc-7fbaf645e0e3-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "5c013314-51d8-4c86-a692-d212cffcc66b-attachment.png", "type": "image/png"}, {"name": "Select tarif {index}", "source": "725b38fc-4b44-46d0-98c8-cbbf4a59159f-attachment.png", "type": "image/png"}], "parameters": [{"name": "index", "value": "2"}], "start": 1758054689842, "stop": 1758054691510}, {"name": "Select  flight 29", "status": "passed", "attachments": [{"name": "wait element", "source": "2ffb7946-dcf9-4ab3-ae63-334fcecf9059-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "df17dd8a-6086-40aa-9e4b-3ab94ed5898b-attachment.png", "type": "image/png"}, {"name": "Select   flight {index}", "source": "d708ded4-db82-40c5-bcc0-06f51ebf1990-attachment.png", "type": "image/png"}], "parameters": [{"name": "index", "value": "29"}], "start": 1758054691510, "stop": 1758054704723}, {"name": "Select fare option at position 2", "status": "passed", "attachments": [{"name": "wait element", "source": "66702630-c81c-4422-841d-71c8195fdd48-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "d709bbda-3607-4b6f-a903-084321c7b551-attachment.png", "type": "image/png"}, {"name": "Select tarif {index}", "source": "76030ece-84dc-4bd2-8992-9f80ce9e962b-attachment.png", "type": "image/png"}], "parameters": [{"name": "index", "value": "2"}], "start": 1758054704724, "stop": 1758054706531}, {"name": "Click continue Button ", "status": "passed", "attachments": [{"name": "Scroll and click", "source": "37f3b6a2-a790-49a0-8414-0f424de62dc9-attachment.png", "type": "image/png"}], "parameters": [{"name": "locator", "value": "('xpath', \"//*[@id='maincontent']/div/div[2]/div/div/button-container/div/div/button\")"}], "start": 1758054706531, "stop": 1758054710699}, {"name": "Initializing contacts page", "status": "passed", "start": 1758054710699, "stop": 1758054713471}, {"name": "Initializing contact query", "status": "passed", "start": 1758054713471, "stop": 1758054713558}, {"name": "Enter passenger data 0", "status": "broken", "statusDetails": {"message": "TypeError: ContactPage.calculate_age() takes 3 positional arguments but 4 were given\n", "trace": "  File \"C:\\Proyecto pycharm\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"C:\\Proyecto pycharm\\pages\\Contact_Page.py\", line 115, in fill_passenger_info\n    self.select_dropdown_value(suffix, \"year\", year, birth_date=birth_date, passenger_type=passenger_type)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Proyecto pycharm\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"C:\\Proyecto pycharm\\pages\\Contact_Page.py\", line 91, in select_dropdown_value\n    age = self.calculate_age(day, month, year)\n"}, "steps": [{"name": "Select dropdown value: 'day' = 9 for suffix '7E7E3533344234383244333132443435353835347E31'", "status": "passed", "attachments": [{"name": "Scroll and click", "source": "e3081115-d6b9-44c3-9162-6f518f3e7b36-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "37d8aff0-b242-4133-83b0-20e12367be6e-attachment.png", "type": "image/png"}, {"name": "Select day: 9", "source": "81dfa779-9a8d-4b55-bc27-448eb557e2e8-attachment.png", "type": "image/png"}], "parameters": [{"name": "suffix", "value": "'7E7E3533344234383244333132443435353835347E31'"}, {"name": "field_type", "value": "'day'"}, {"name": "value", "value": "9"}, {"name": "birth_date", "value": "None"}, {"name": "passenger_type", "value": "None"}], "start": 1758054719931, "stop": 1758054722818}, {"name": "Select dropdown value: 'month' = 6 for suffix '7E7E3533344234383244333132443435353835347E31'", "status": "passed", "attachments": [{"name": "Scroll and click", "source": "640bebab-72eb-4999-8c51-3218511c7bc4-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "837f5a0d-e6cc-46f3-8a2d-86b2318d372c-attachment.png", "type": "image/png"}, {"name": "Select month: 6", "source": "aaa53195-5841-40f5-8951-bedf4c2060f1-attachment.png", "type": "image/png"}], "parameters": [{"name": "suffix", "value": "'7E7E3533344234383244333132443435353835347E31'"}, {"name": "field_type", "value": "'month'"}, {"name": "value", "value": "6"}, {"name": "birth_date", "value": "None"}, {"name": "passenger_type", "value": "None"}], "start": 1758054722819, "stop": 1758054725584}, {"name": "Select dropdown value: 'year' = 2009 for suffix '7E7E3533344234383244333132443435353835347E31'", "status": "broken", "statusDetails": {"message": "TypeError: ContactPage.calculate_age() takes 3 positional arguments but 4 were given\n", "trace": "  File \"C:\\Proyecto pycharm\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"C:\\Proyecto pycharm\\pages\\Contact_Page.py\", line 91, in select_dropdown_value\n    age = self.calculate_age(day, month, year)\n"}, "attachments": [{"name": "Scroll and click", "source": "5235fb2c-9db5-410d-9ae1-006c0a754978-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "c1359efe-d10a-4666-b666-28d45b1ca2db-attachment.png", "type": "image/png"}, {"name": "Select year: 2009", "source": "1050940c-628c-4b33-bcec-03b6787fe86f-attachment.png", "type": "image/png"}], "parameters": [{"name": "suffix", "value": "'7E7E3533344234383244333132443435353835347E31'"}, {"name": "field_type", "value": "'year'"}, {"name": "value", "value": "2009"}, {"name": "birth_date", "value": "(9, 6, 2009)"}, {"name": "passenger_type", "value": "'adults'"}], "start": 1758054725584, "stop": 1758054728394}], "attachments": [{"name": "Scroll and click", "source": "09e85ec4-32f6-4bd8-9a98-6196f80d99ce-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "8c292809-36b6-4969-9fe9-06a43215440c-attachment.png", "type": "image/png"}, {"name": "Select gender", "source": "060495dd-ed77-4ea0-8e84-33620c9b260d-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "6972bf04-6a74-4000-845c-1f26afd9f11a-attachment.png", "type": "image/png"}, {"name": "Select name", "source": "b6bd69f6-aed2-4478-962e-f694ed8143bc-attachment.png", "type": "image/png"}, {"name": "Scroll and click", "source": "b7e892c9-1260-4c2d-899b-8bc7498fad24-attachment.png", "type": "image/png"}, {"name": "Select last name", "source": "4e1f5f0f-6182-4188-a7bf-64f9fd60d3a1-attachment.png", "type": "image/png"}], "parameters": [{"name": "index", "value": "0"}, {"name": "suffix", "value": "'7E7E3533344234383244333132443435353835347E31'"}, {"name": "first_name", "value": "'Santiago'"}, {"name": "last_name", "value": "'Gomez'"}, {"name": "gender", "value": "0"}, {"name": "day", "value": "9"}, {"name": "month", "value": "6"}, {"name": "year", "value": "2009"}, {"name": "nationality_index", "value": "0"}, {"name": "passenger_type", "value": "'adults'"}], "start": 1758054713559, "stop": 1758054728396}], "attachments": [{"name": "Accept Cookies", "source": "453dbf7b-235c-49c6-8127-077d49a5edc5-attachment.png", "type": "image/png"}, {"name": "stdout", "source": "0fb6ba30-a8f9-46d5-8bf2-6f3b06b93771-attachment.txt", "type": "text/plain"}], "start": 1758054666645, "stop": 1758054728397, "uuid": "f3e34674-3a35-46d3-8f0b-748703ef5e13", "historyId": "570568e184b21b9449d5ccd2136420b2", "testCaseId": "570568e184b21b9449d5ccd2136420b2", "fullName": "tests.test_search_flow#test_search_flow", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_search_flow"}, {"name": "host", "value": "DESKTOP-QCGAJ37"}, {"name": "thread", "value": "34276-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_search_flow"}], "titlePath": ["tests", "test_search_flow.py"]}